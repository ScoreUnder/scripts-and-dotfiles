<?xml version='1.0'?>
<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>
<fontconfig>
    <!-- Pretty rendering options -->
    <match target="font">
        <edit mode="assign" name="hinting">
            <bool>true</bool>
        </edit>
        <edit mode="assign" name="hintstyle">
            <const>hintslight</const>
        </edit>
        <edit mode="assign" name="autohint">
            <bool>true</bool>
        </edit>
        <edit mode="assign" name="antialias">
            <bool>true</bool>
        </edit>
        <edit mode="assign" name="rgba">
            <const>rgb</const>
        </edit>
        <edit mode="assign" name="lcdfilter">
            <const>lcddefault</const>
        </edit>
        <edit mode="assign" name="embeddedbitmap">
            <bool>true</bool>
        </edit>
    </match>

    <!-- Always let emoji fonts match! -->
    <match target="pattern">
        <test name="family" compare="not_eq" qual="all">
            <string>emoji</string>
        </test>
        <edit mode="append_last" name="family" binding="weak">
            <string>emoji</string>
        </edit>
    </match>

    <!-- Adobe Blank is literally just blank. If it gets selected, that's usually pretty bad. -->
    <selectfont>
        <rejectfont>
            <pattern>
                <patelt name="family">
                    <string>Adobe Blank</string>
                </patelt>
            </pattern>
        </rejectfont>
    </selectfont>

    <!-- Remove emoji characters from some common fonts that don't provide nice colour glyphs -->
    <match target="scan">
        <test name="family" compare="eq">
            <if>
                <or>
                    <eq><name>family</name><string>Segoe UI Symbol</string></eq>
                    <eq><name>family</name><string>DejaVu Sans</string></eq>
                    <eq><name>family</name><string>DejaVu Serif</string></eq>
                </or>
                <name>family</name>
                <string>**please don't match**</string>
            </if>
        </test>
        <edit name="charset" mode="assign">
            <minus>
                <name>charset</name>
                <charset>
                    <range>
                        <int>0x1F300</int>
                        <int>0x1F6FF</int>
                    </range>
                    <range>
                        <int>0x1F900</int>
                        <int>0x1F9FF</int>
                    </range>
                </charset>
            </minus>
        </edit>
    </match>

    <!-- Set up aliases for common font families -->
    <match target="pattern">
        <test name="family" compare="eq">
            <string>serif</string>
        </test>
        <edit name="family" mode="prepend" binding="strong">
            <string>Source Serif Pro</string>
            <string>DejaVu Serif</string>
            <string>IPAMincho</string>
            <string>MS PMincho</string>
        </edit>
    </match>
    <match target="pattern">
        <test name="family" compare="eq">
            <string>sans-serif</string>
        </test>
        <edit name="family" mode="prepend" binding="strong">
            <string>Source Sans Pro</string>
            <string>DejaVu Sans</string>
            <string>M+ 2c</string>
            <string>IPAPGothic</string>
            <string>MS PGothic</string>
            <string>Source Han Sans JP</string>
        </edit>
    </match>
    <match target="pattern">
        <test name="family" compare="eq">
            <string>mincho</string>
        </test>
        <edit name="family" mode="prepend" binding="strong">
            <string>IPAMincho</string>
            <string>MS PMincho</string>
        </edit>
    </match>
    <match target="pattern">
        <test name="family" compare="eq">
            <string>monospace</string>
        </test>
        <edit name="family" mode="prepend" binding="strong">
            <string>Fira Code</string>
            <string>Source Code Pro</string>
            <string>M+ 2c</string>
            <string>IPAGothic</string>
            <string>MS Gothic</string>
        </edit>
    </match>
    <match target="pattern">
        <test name="family" compare="eq">
            <string>gothic</string>
        </test>
        <edit name="family" mode="prepend" binding="strong">
            <string>M+ 2c</string>
            <string>IPAPGothic</string>
            <string>MS PGothic</string>
            <string>Source Han Sans JP</string>
        </edit>
    </match>
    <match target="pattern">
        <test name="family" compare="eq">
            <string>emoji</string>
        </test>
        <!-- Twitter Color Emoji can't be rendered in some applications; blacklist them -->
        <test name="prgname" compare="not_eq">
            <if>
                <or>
                    <eq><name>prgname</name><string>chromium</string></eq>
                    <eq><name>prgname</name><string>electron</string></eq>
                </or>
                <name>prgname</name>
                <string>**please don't match**</string>
            </if>
        </test>
        <edit name="family" mode="prepend" binding="strong">
            <string>Twitter Color Emoji</string>
        </edit>
    </match>
    <match target="pattern">
        <test name="family" compare="eq">
            <string>emoji</string>
        </test>
        <edit name="family" mode="prepend" binding="strong">
            <string>JoyPixels</string>
            <string>Noto Color Emoji</string>
        </edit>
    </match>
</fontconfig>
